custom_logo: "samurai_logo_mqc.png"
custom_logo_title: "SAMURAI"

report_comment: >
  This report has been generated by the <a href="https://github.com/dincalcilab/samurai" target="_blank">dincalcilab/samurai</a>
  analysis pipeline.
report_section_order:
  signatures_summary:
    before: "ascatsc"
  maftools_summary:
    after: "gistic"
  qdnaseq_summary:
    before: "ascatsc"
  ichorcna_summary:
    before: "wisecondorx_summary"
  "dincalcilab-samurai-methods-description":
    order: -1000
  software_versions:
    order: -1001
  "dincalcilab-samurai-summary":
    order: -1002

title: "SAMURAI Results"
subtitle: "SAMURAI's analysis results of Copy Number Alterations from shallow whole genome sequencing."

extra_fn_clean_exts:
  - type: regex
    pattern: "^markdup."

top_modules:
- "fastqc"
- "picard"
- "samtools"
- "custom_data"

custom_data:

  qdnaseq_summary:
    id: "qdnaseq"
    section_name: "QDNAseq Summary"
    description: 'This table shows a summary table of QDNAseq analysis.'
    format: 'txt'
    plot_type: 'table'
    pconfig:
      col1_header: 'Sample ID'
    headers:
      sample:
        title: 'Sample ID'
        placement: 1
      nr_reads:
        title: 'Number of Reads'
        placement: 2
        format: '{:,.0f}'
      expected_var:
        title: 'Expected Variance'
        format: '{:,.4f}'
        placement: 3
        scale: False
      expected_sd:
        title: 'Expected Standard Deviation'
        format: '{:,.4f}'
        placement: 4
        scale: False
      binsize:
        title: 'Size of bins'
        format: '{:,.0f}'
        placement: 5

  ascatsc_summary:
    id: "ascatsc"
    section_name: "ASCAT.sc Summary"
    description: "This table shows purity and ploidy values computed by ASCAT.sc."
    format: 'txt'
    plot_type: 'table'
    pconfig:
      col1_header: 'Sample ID'
    headers:
      samplename:
        title: 'Sample ID'
        placement: 1
      purity:
        title: 'Purity'
        format: '{:,.4f}'
        placement: 2
        scale: False
      ploidy:
        title: 'Ploidy'
        format: '{:,.4f}'
        placement: 3
        scale: False

  wisecondorx_summary:
    id: "wisecondorx"
    section_name: "WisecondorX Summary"
    description: "This table shows the Copy Number Score (CPA) and Median Segment Variance (MSV) computed by WisecondorX."
    format: 'txt'
    plot_type: 'table'
    pconfig:
      col1_header: 'Sample ID'
    headers:
      sample:
        title: 'Sample ID'
        placement: 1
      reads:
        title: 'Number of Reads'
        placement: 2
        format: '{:,.0f}'
        scale: False
      cpa:
        title: 'Copy number profile abnormality Score'
        format: '{:,.4f}'
        placement: 3
        scale: False
      msv:
        title: 'Median segment variance'
        format: '{:,.4f}'
        placement: 4
        scale: False

  ichorcna_summary:
    id: "ichorcna"
    section_name: "IchorCNA"
    description: "This table shows the tumor fraction and ploidy estimates made by ichorCNA."
    plot_type: 'table'
    pconfig:
      col1_header: 'Sample ID'
    headers:
      samplename:
        title: "Sample ID"
        placement: 1
      Ploidy:
        title: 'Ploidy'
        format: '{:,.0f}'
        placement: 2
        scale: False
      Tumor Fraction:
        title: 'Tumor fraction'
        format: '{:,.4f%}'
        placement: 3
        scale: False
      GC-Map correction MAD:
        title: 'MAD'
        format: '{:,.4f}'
        placement: 4
        max: 0.5
        cond_formatting_rules:
          pass:
            - lt: 0.15
          warn:
            - gt: 0.15
          fail:
            - gt: 0.25

  gistic_lesions:
    id: "gistic"
    section_name: "Gistic Analysis Summary"
    description: "This table shows significant lesions identified by GISTIC2 analysis. \n
                  Focal lesions are alterations which span less than 25% of a chromosomal arm. \n
                  Broad lesions span more than 25% of the chromosomal arm, but less than a whole arm"
    plot_type: 'table'
    pconfig:
      col1_header: 'Chromosome'
    headers:
      chromosome:
        title: 'Chromosome'
        placement: 1
      cytoband:
        title: 'Cytoband'
        placement: 2
      start:
        title: 'Start'
        placement: 3
        format: '{:,.0f}'
        scale: False
      end:
        title: 'End'
        placement: 4
        format: '{:,.0f}'
        scale: False
      length:
        title: 'Length'
        placement: 5
        format: '{:,.0f}'
        scale: False
      kind:
        title: 'CN Kind'
        placement: 6
        cond_formatting_rules:
           pass:
             - s_eq: 'Amp'
           warn:
             - s_eq: 'Neut'
           fail:
             - s_eq: 'Del'
      frequency:
        title: 'Lesion Frequency'
        placement: 7
        format: '{:,.2f}'
        scale: False
      counts:
        title: 'Nr. of Samples'
        placement: 8
        format: '{:,.0f}'
        scale: False
      lesion_type:
        title: 'Type of Lesion'
        placement: 9

  maftools_summary:
    id: "maftools"
    section_name: "Gistic Analysis"
    description: "Maftools genomic plot with segments highlighting significant Amplifications and Deletions."

  signatures_summary:
    id: "signatures"
    section_name: "Copy Number Signatures Activities"
    description: "The image is a summary view of Copy number Signatures from segmentation files, computed by the R Package CINSignatureQuantification."

export_plots: true
ignore_images: false
